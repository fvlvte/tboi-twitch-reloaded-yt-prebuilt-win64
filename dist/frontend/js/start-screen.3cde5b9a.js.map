{"version":3,"sources":["webpack:///./src/screens/Start.vue","webpack:///src/screens/Start.vue","webpack:///./src/screens/Start.vue?8029","webpack:///./src/screens/Start.vue?c4b9","webpack:///./src/isaac/models/ITMRText.js","webpack:///./src/screens/Start.vue?b25c","webpack:///./src/isaac/isaacConnect.js","webpack:///./src/isaac/models/ITMRColor.js","webpack:///./src/plugins/locale/translateFunction.js"],"names":["render","_vm","this","_c","_self","staticClass","style","getImgUrl","attrs","_v","_s","_f","$store","state","locale","on","cancel","staticRenderFns","components","BigButton","name","mounted","methods","component","ITMRText","constructor","value","pos","color","blink","size","isCenter","postfix","prefix","setPos","vector","setText","text","setPostfix","setPrefix","setColor","setBlink","removeBlink","setSize","setCenter","center","prepare","obj","equals","curText","IsaacConnect","port","lang","stats","success","errors","isConnected","events","onConnect","onReconnect","handlers","checkOutputTimer","searchServerTimer","setInterval","search","bind","consoleStyle","_log","fetch","method","body","then","res","json","out","clearInterval","connect","catch","err","stopSearch","testConnect","Math","round","sendToGame","m","clearAll","d","t","_signal","Promise","all","data","high","repeat","resolve","reject","_send","console","error","checkOutput","log","forEach","com","c","addHandler","func","removeHandler","msg","type","JSON","stringify","ITMRColor","r","g","b","a","val","l_Ru","strings","l_En"],"mappings":"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","file":"js/start-screen.3cde5b9a.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"startScreen\"},[_c('div',{staticClass:\"waitSplash\"},[_c('div',{staticClass:\"img\",style:(`background-image:url('${_vm.getImgUrl('hourglass')}')`),attrs:{\"alt\":\"hourglass\"}}),_c('div',{staticClass:\"text\"},[_vm._v(_vm._s(_vm._f(\"t\")(\"connectingWait\",_vm.$store.state.locale)))])]),_c('big-button',{on:{\"onClick\":_vm.cancel}},[_vm._v(_vm._s(_vm._f(\"t\")(\"cancel\",_vm.$store.state.locale)))])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"startScreen\">\r\n    <div class=\"waitSplash\">\r\n      <div class=\"img\" :style=\"`background-image:url('${getImgUrl('hourglass')}')`\" alt=\"hourglass\"/>\r\n      <div class=\"text\">{{\"connectingWait\" | t($store.state.locale)}}</div>\r\n    </div>\r\n    <big-button @onClick=\"cancel\">{{\"cancel\" | t($store.state.locale)}}</big-button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport IsaacConnect from '@/isaac/isaacConnect'\r\nimport BigButton from '../components/BigButton.vue';\r\n\r\nexport default {\r\n  components: { BigButton },\r\n  name: 'startScreen',\r\n\r\n  mounted () {\r\n    this.$services.itmr = new IsaacConnect(8666, this.$store.state.locale);\r\n    this.$services.itmr.events.onConnect = () => {\r\n      this.$router.push('/channels');\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    cancel () {\r\n      this.$services.itmr.stopSearch();\r\n      this.$router.push('/');\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\r\n.waitSplash {\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-size: 1.7rem;\r\n  margin-bottom: 21px;\r\n\r\n  .img {\r\n    height: 15vw;\r\n    width: 15vw;\r\n\r\n    max-width: 1024;\r\n    max-height: 1024;\r\n\r\n    margin: 4vh auto;\r\n\r\n    background-repeat: no-repeat;\r\n    background-size: contain;\r\n    background-position: center;\r\n\r\n    animation: hourglassAnim 1s ease-in-out infinite;\r\n  }\r\n}\r\n\r\n@keyframes hourglassAnim {\r\n  from {\r\n    transform: rotate(0deg);\r\n  }\r\n\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Start.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Start.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Start.vue?vue&type=template&id=562e4441&\"\nimport script from \"./Start.vue?vue&type=script&lang=js&\"\nexport * from \"./Start.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Start.vue?vue&type=style&index=0&id=562e4441&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import ITMRColor from \"./ITMRColor\";\r\nimport ITMRVector from \"./ITMRVector\";\r\n\r\nexport default class ITMRText {\r\n\r\n  /**\r\n   * Create new Text for Isaac On Twitch Mod\r\n   * @param {String} name - Text id\r\n   * @param {String} value - Text value\r\n   * @param {ITMRVector} pos - Text position\r\n   * @param {ITMRColor} color - Text color\r\n   * @param {ITMRColor} blink - Text blink color\r\n   * @param {Number} size - Text size\r\n   * @param {Boolean} isCenter - Set text to center\r\n   * @param {String} postfix - Text postfix, added to the end of text\r\n   */\r\n  constructor (name, value, pos = null, color = null, blink = null, size = null, isCenter = null, postfix = null, prefix = null) {\r\n\r\n    this.name = name;\r\n    this.value = value;\r\n    this.pos = pos;\r\n    this.color = color;\r\n    this.blink = blink;\r\n    this.size = size;\r\n    this.isCenter = isCenter;\r\n    this.postfix = postfix;\r\n    this.prefix = prefix;\r\n\r\n  }\r\n\r\n  /**\r\n   * Change text position\r\n   * @param {ITMRVector} vector - Vector with new position\r\n   */\r\n  setPos (vector) {\r\n    this.pos = vector\r\n  }\r\n\r\n  /**\r\n   * Change text value\r\n   * @param {String} text - New text value\r\n   */\r\n  setText (text) {\r\n    this.value = text;\r\n  }\r\n\r\n  /**\r\n   * Change text postfix\r\n   * @param {String} postfix - New text postfix\r\n   */\r\n  setPostfix (postfix) {\r\n    this.postfix = postfix;\r\n  }\r\n\r\n  /**\r\n   * Change text prefix\r\n   * @param {String} prefix - New text prefix\r\n   */\r\n  setPrefix(prefix) {\r\n    this.prefix = prefix;\r\n  }\r\n\r\n  /**\r\n   * Change text color\r\n   * @param {ITMRColor|null} color - Text color\r\n   */\r\n  setColor (color) {\r\n    this.color = color\r\n  }\r\n\r\n  /**\r\n   * Change text blink color\r\n   * @param {ITMRColor|null} color - Blink color\r\n   */\r\n  setBlink (color) {\r\n    this.blink = color\r\n  }\r\n\r\n  /**\r\n   * Remove text blinking\r\n   */\r\n  removeBlink () {\r\n    this.blink = null;\r\n  }\r\n\r\n  /**\r\n   * Change text size\r\n   * @param {Number} size - New text size\r\n   */\r\n  setSize (size) {\r\n    this.size = size;\r\n  }\r\n\r\n  /**\r\n   * Change text centering\r\n   * @param {Boolean} center - Set text to center\r\n   */\r\n  setCenter (center) {\r\n    this.isCenter = center;\r\n  }\r\n\r\n  /**\r\n   * Return only not null fields for decreasing data size\r\n   * @returns {Object}\r\n   */\r\n  prepare () {\r\n\r\n    let obj = {};\r\n    obj['name'] = this.name;\r\n    obj['value'] = this.postfix ? `${this.value} ${this.postfix}` : this.value;\r\n    obj['value'] = this.prefix ? `${this.prefix} ${obj['value']}` : obj['value'];\r\n    if (this.pos) obj['pos'] = this.pos;\r\n    if (this.color) obj['color'] = this.color;\r\n    if (this.blink) obj['blink'] = this.blink;\r\n    if (this.size) obj['size'] = this.size;\r\n    if (this.isCenter) obj['isCenter'] = this.isCenter;\r\n\r\n    return obj;\r\n  }\r\n\r\n  /**\r\n   * Check if two texts is equals\r\n   * @param {ITMRText} text - Text for checking\r\n   * @returns {Boolean}\r\n   */\r\n  equals (text) {\r\n\r\n    if (text == null) return false;\r\n    let curText = this.prepare();\r\n\r\n    return curText?.name == text?.name &&\r\n      curText?.value == text?.value &&\r\n      curText?.pos == text?.pos &&\r\n      curText?.color == text?.color &&\r\n      curText?.blink == text?.blink &&\r\n      curText?.size == text?.size &&\r\n      curText?.postfix == text?.postfix &&\r\n      curText?.prefix == text?.prefix &&\r\n      curText?.isCenter == text?.isCenter;\r\n\r\n  }\r\n\r\n}","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Start.vue?vue&type=style&index=0&id=562e4441&prod&lang=scss&\"","import ITMRText from './models/ITMRText'\r\nimport t from '../plugins/locale/translateFunction'\r\n\r\nexport default class IsaacConnect {\r\n\r\n  constructor (port = 8666, lang = \"en\") {\r\n    // Requests count\r\n    this.stats = {\r\n      success: 0, // Success requests (including successful attempts)\r\n      errors: 0   // Failed requests\r\n    };\r\n\r\n    this.isConnected = false;\r\n\r\n    // Event handlers\r\n    this.events = {\r\n      onConnect: () => {},\r\n      onReconnect: () => {}\r\n    };\r\n\r\n    this.port = port; // Game port\r\n    this.lang = lang; // Localization\r\n\r\n    // Game to site handlers\r\n    this.handlers = {};\r\n\r\n    // Timers\r\n    this.checkOutputTimer = null;\r\n    this.searchServerTimer = setInterval(this.search.bind(this), 1000);\r\n\r\n    this.consoleStyle = 'background-color: #EFD8CD; color: #473A3C; border-radius: 100px;padding: 1px 4px;';\r\n\r\n    this._log('Search game server...')\r\n  }\r\n\r\n  /**\r\n   * Search active game server\r\n   */\r\n  search () {\r\n    fetch(`http://localhost:${this.port}`, {\r\n      method: 'POST',\r\n      body: `||{\"m\":\"ping\"}||\\n`\r\n    })\r\n    .then (res => res.json())\r\n    .then (res => {\r\n      if (res.out == \"pong\") {\r\n        this._log('Game server found')\r\n        clearInterval(this.searchServerTimer);\r\n        this.connect()\r\n      }\r\n    })\r\n    .catch (err => {})\r\n  }\r\n\r\n  /**\r\n   * Stop current game server searching\r\n   */\r\n  stopSearch() {\r\n    clearInterval(this.searchServerTimer);\r\n  }\r\n\r\n  /**\r\n   * Test requests\r\n   */\r\n  testConnect () {\r\n    setInterval(() => {\r\n      fetch(`http://localhost:${this.port}`, {\r\n        method: 'POST',\r\n        body: `||{\"m\":\"ping\"}||\\n`\r\n      })\r\n      .then (res => res.json())\r\n      .then (res => {\r\n        if (res.out == \"pong\") {\r\n          this.stats.success ++;\r\n        }\r\n      })\r\n      .catch (err => {this.stats.errors ++;})\r\n\r\n      this._log(`${this.stats.success}|${this.stats.errors} / ${Math.round(this.stats.errors/(this.stats.success + this.stats.errors)*100, 2)}%`);\r\n    }, 250)\r\n  }\r\n\r\n  /**\r\n   * Send connect request to game server\r\n   */\r\n  connect () {\r\n    this.sendToGame({\r\n      m: 'connect'\r\n    })\r\n    .then (res => {\r\n      if (res.out == 'success') {\r\n        this._log('Game connected');\r\n\r\n        // Launch checking game output for two-way connection\r\n        //this.checkOutputTimer = setInterval(() => this.checkOutput(), 1000);\r\n\r\n        this.isConnected = true;\r\n\r\n\r\n        this.clearAll().then(() => {\r\n          // Show text for player\r\n          this.sendToGame({\r\n            m: 'addText',\r\n            d: [new ITMRText('gameConnected', t('gameConnected', this.lang)).prepare()]\r\n          })\r\n\r\n          // Call event onConnect\r\n          this._signal('onConnect');\r\n        });\r\n\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  /**\r\n   * Clear all UI elements from mod in game\r\n   */\r\n  clearAll() {\r\n\r\n    return Promise.all([\r\n      // Remove pollframes\r\n      this.sendToGame({ m: 'removePollframes' }, true),\r\n\r\n      // Remove progress bar\r\n      this.sendToGame({ m: 'removeProgressBar' }, true),\r\n\r\n      // Clear text\r\n      this.sendToGame({\r\n        m: 'clearText'\r\n      }, true)\r\n    ]);\r\n\r\n  }\r\n\r\n\r\n  /**\r\n   * Send data to game server\r\n   * @param {Object} data - Data for sending to game\r\n   * @param {Boolean} high - If high = true, resend data more times if request failed\r\n   * @param {Number} repeat - Current attempt number\r\n   */\r\n  sendToGame (data, high = false, repeat = 0) {\r\n\r\n    return new Promise((resolve, reject) => {\r\n      this._send(data, repeat, high)\r\n      .then (res => res.json())\r\n      .catch(err => {\r\n        console.error(err);\r\n        reject(err);\r\n      })\r\n      .then(\r\n        res => {\r\n          this.isConnected = true;\r\n          resolve(res);\r\n        }\r\n      )\r\n      .catch(err => {\r\n        console.error(err);\r\n      });\r\n    });\r\n\r\n  }\r\n\r\n  /**\r\n   * Request output data from game\r\n   */\r\n  checkOutput () {\r\n    fetch(`http://localhost:${this.port}`, {\r\n      method: 'POST',\r\n      body: `||{\"m\":\"out\"}||\\n`\r\n    })\r\n    .then (res => res.json())\r\n    .then (res => {\r\n      if (!this.isConnected) {\r\n\r\n        console.log(\"send reconnect\");\r\n\r\n        this.sendToGame({\r\n          m: 'removeText',\r\n          d: ['siteMessage']\r\n        })\r\n\r\n        this._signal('onReconnect');\r\n      }\r\n\r\n\r\n      this.isConnected = true;\r\n      res.out.forEach(com => {\r\n        if (this.handlers[com.c]) {\r\n          this.handlers[com.c](com.d);\r\n        }\r\n        else {\r\n          this._log(`Not found handler for ${com.c}`);\r\n        }\r\n      });\r\n    })\r\n    .catch(err => {\r\n      this.isConnected = false;\r\n      this._log('Connection to Isaac skip request', 'warn');\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Add handler for request\r\n   * @param {String} name - Value from field output.c in checkOutput method\r\n   * @param {Function} func - Function that is triggered when a command is received\r\n   */\r\n  addHandler (name, func) {\r\n    this.handlers[name] = func;\r\n  }\r\n\r\n /**\r\n * Remove existing handler\r\n * @param {String} name - Value from field output.c in checkOutput method\r\n */\r\n  removeHandler (name) {\r\n    delete this.handlers[name];\r\n  }\r\n\r\n  /**\r\n   * Using inside this class for calling callbacks for events\r\n   * @param {String} name - Event name\r\n   * @param {Object} data - Data from event\r\n   */\r\n  _signal(name, data = null) {\r\n    if (this.events[name]) {\r\n      this.events[name](data);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Log to console with style\r\n   * @param {String} msg - Message for console\r\n   * @param {String} type - Log function: log, warning or error\r\n   */\r\n  _log (msg, type = 'log') {\r\n    console[type]('%cITMR%c ' + msg, this.consoleStyle, '');\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {Object} data - Data for sending\r\n   * @param {Number} repeat - Current attempt\r\n   * @param {Boolean} high - TRUE, if data has high priority\r\n   */\r\n  _send (data, repeat = 1, high = false) {\r\n    return fetch(`http://localhost:${this.port}`, {\r\n      method: 'POST',\r\n      body: `||${JSON.stringify(data)}||\\n`\r\n    }).catch(function (error) {\r\n\r\n      this.isConnected = false;\r\n      this._log('Connection to Isaac is broken', 'error');\r\n\r\n      if (repeat > 3 && !high) {\r\n        throw error;\r\n      }\r\n      if (repeat > 6 && high) {\r\n        throw error;\r\n      }\r\n      return this._send(data, repeat + 1, high);\r\n    }.bind(this));\r\n  }\r\n\r\n}","export default class ITMRColor {\r\n\r\n  /**\r\n   * Create new color from RGBA data\r\n   * @param {Number} r - Red from 0 to 255\r\n   * @param {Number} g - Green from 0 to 255\r\n   * @param {Number} b - Blue from 0 to 255\r\n   * @param {Number} a - Alpha from 0 to 1\r\n   */\r\n  constructor(r,g,b,a) {\r\n    this.r = r/255;\r\n    this.g = g/255;\r\n    this.b = b/255;\r\n    this.a = a\r\n  }\r\n\r\n}","import l_En from './locales/en';\r\nimport l_Ru from './locales/ru';\r\n\r\nexport default function t (val, locale) {\r\n  if (locale == \"ru\") {\r\n    if (l_Ru.strings[val])\r\n      return l_Ru.strings[val];\r\n    else\r\n      return `!${val}!`;\r\n  }\r\n  else {\r\n    if (l_En.strings[val])\r\n      return l_En.strings[val];\r\n    else\r\n      return `!${val}!`;\r\n  }\r\n}"],"sourceRoot":""}